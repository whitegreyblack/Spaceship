length = 100
world = '''
=================.~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
======.==========..~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
=====.&.==========...~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
=====.^&.=========.....~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
====.&^^...=..=====.....&.~~~^^~~~^^^^^^^^^^~~~~^^^^^^^^^^^^^^^~~^~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
===.&&^~&.&...=========..&&~^^^~~~~^^^^^^^^~~~~~~^^^^^^^^^^^~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
===.&^^^~&....=========..&&~~~^~~~~~~~^^^^~~~~~~~^^^^^^^^^^^~~~~~~~~~^^^^^^^^^~~~~~~~^^^^^^^^^^^^^^^
===.~^*~~&.&.===========..&&~~^~~#~~~~~^^~~~~&~~~^^^~~^^^^^^^~~#~.~~~~~~~^^^^~~~~~~~~~^^^^^^^^^^^^^^
==..^~&.&&.&.===========..&&&~^~~~&&~~~~^~~~.&~~~~^^~~^^^^^^^~~~..~~~~~~~^^^~~~~~~~~~~^^^^^^^^^^^^^^
==..~~&.&&&..==.========..&&&.~~~~~&..~~~~~.&&&~~^^^~~^^^^^^~~~.~~~~&&~~^^^^~~~~...#~~~^^^^^^^^^^^^^
=..~&~+.~&&&&.....=======..&&..~~~~&&&.~~...&&&.~^^^~~^^^^^^~~~.-~.&&&~~~~~~~~~..&&.~~~~^^^^^^^^^^^^
=.&~&~..~~~~.&&&....======..&&&~~~~&&&.~&&&&&&&&~^^~~~^^~^^~~~~&--.&&.~~~~..~&&&&&&&.~~~^^^^^^^^^^^^
=.~&&~~..~~&&&&~~.&..====...&&&&&~&&&&&~&&&&&&&.~~~~~~~~~~~~~~.&---.&.~~~.&&&&&&&&&&&~~~^^^^^^^^^^^^
=.&&..~.~~~...&~^~.&..==...&.&&&&~.&&&&&~&&&&&&.~~~~~~~~~~~~~&.-----&..~..&&&&&&&&&..~~^^^^^^^^^^^^^
==..=~~~~.~.+&&&~^~&.==......&&&&~~.&&&&&&&&&&&&#~&~~~~#~~~~~&&-----&&..&&&&&&&&&..~~~^^~^^^^^^^^^^^
======....~~...&~^&&.==..&..&&&&&&~~.&&&&&&&&&&&&&&-~.&&~~~&&&&-----.&&&&&&&&..~~~~~^^~~^^^^^^^^^^^~
=====..=.~~~~~&~~^~&~==..&&.&&&&&&&~.&&&&&&&&&&&.-----...&&&&~------.&&&&&&.~~~~~^^^^^^^~^^^~^^^^^^~
=========~~&&~~~^~~.~.==....&&&&&&&~&&&&&&&&&&&.--------.&&~~~-.---&&&&&&&.~~~~~^^~~^^^~~^^^~~^^^^^~
========..~~&&~^^~&.~+....&&&&&&&&&~&&&&&&&&&&&..---------~~&&.&...&&&&&&&.&.~~~^~~~~^^~~^^~~~^^^~^^
========.&&.&.~^^~&&~~..&&&&&&&&&&&~&&&&&&&&&&&&.----&&---..&&T&&&&&&&&&&&&&&.~~^~#~~^~~~^^~~~^^^~~~
========.&&&&~~^^~~&&~&&&&&&&&&&&&~~&&&&&&&&&&&&..---.&..&&&&&&&&&&&&&&&&&&&&&~~^^~T~~~~~^^~~~^^^^^~
=========.&&~~^^^~&.&~--&&&~~~&&~~~&&&&&&&&&&&&&&.~--.&&&&&&&&&&&&&&&&&&&&&&&&&..~^T~~~T~^^.~~^^^^^~
==========.&&&^~~&.------~~~T~~~~T~&&&&&&&&&&&&&&-~~-.&&&&&&&&&&&&&&&&&&&&&&&&&&.~~TT~TT~~~T~~^^^^^~
===========.&&~&&&-------TTT.TT.T~~&.&&&&&&&&&&~----&&&&&&&&&&&&&&&&&&&&&&&&&&.~~^~~TTT~~^~TT~^^~~~~
============..&&&~~---TT..TTTT..T~&&&&&&&&&&&&&~&--&&&&&&&&&&&&&&&&&&&&&&&&&&&~~^^^~TTT~~^~TT~^^~~~~
====.TT======.&~~~TT---...T.TT.T.~&&&&&&&&&&&&&~&~.&&&&&&&&&&&&&&&&&&&&&&&&&&~~~~~~TT~~~^^~TT.~^~T.~
===T^~&.=..==~&~..T.TTT.TT...TT..~&..&&&&&&&&&.~&~.&&&&&&&&&&&&&&&&&&&&&&&&~~~TTT~TT~~~^^~~.TT~^~TT.
==T~~...==..=~~~.T...T....T..T..T~..&&&&&&&&&&&~~~.&&&&&&&&&&&&&&&&&&&&&&&.~TTTT~TTTT~~^^~~.TT^~~TTT
==.&.+..T=T.....TTT~TTTTT..TT...T~~&.&&...&&&&&~..&.&&&&&&&&&&&&&&&&&&&&.~~~TTT~~TTT~~^^#~..T~^~~TTT
===.....TTTT.T.~T~~TTTTTTTTTTTTT..~.&&&&&&&&.&~~~&&&&&&&&&&&&&&&&&&&&&~~~~~.TTTT~TTT~~^~.TTT.~^~T~TT
====T..TTTT~T~~~~~TTTTTTTTTTTTTT.T~.&..&&&.&&~~.~~&.&&&&&&&&&&&&..&..~~TTTTTTTTT~TTT~~^~~TTTT.^~TT~.
===T.TTTTTTT~~~~~TTTTTTTTTTTTTTT.T~~~&..&..&~T...~~~&&&&&&&&&&.&&&&..~.TTTTTTTTTTTTT~^~~~TTTTT^~TT~T
==..TTT.TT~~TT~~~TTTT~TTT&TTTTTT..TT~&&&&.&&-TT.T.T~.&&&&&&&..&&&..-~~.T.TTTTTTTTTT~^~~~TTTTTTT^~T.T
=.T.T..TT.TTTTT~^TT~~TTTTTTTTTTTT.TT-..&&&&--..TTT.~.&...&&&&&&&&.---~.TTTTTTTTTTTT^~TTTTTTTTTT^~~TT
=....T..T.TTTTT~^^.~TTTTTTTTTTTTTTT---&--&---..TTTT~~~.&&&&..&&&...----..TT..T&TT~~~TTTTTTTTTT~.T~~T
=...TT.T.TTTTTTT~^~TTTTTTTTTTTTTTTT----^----+..T.TTT.~~~&...&.&.....---..TTTTTTTTT~TTT~TTTTTTT.T.T~T
==.TTTT.TTTTTTTTT~~TTTTTTTTTTT~~TTTT-T------..TTTTTT.TT~~~~.&....+..----...TTTTTTTTTTTT~~TTT~~TTTTTT
==.T..TT.TTTT.T.T.^~TTTTTTT~TT~TTT~TTTT----...TTTT...TTT.T~~~......------...TTTTTTTTTT~~TTTTT~~~TT..
=.=.TT.TTT..TTTTT.^^~~TTTTT~T~TTTT~.TTTT---T..T.TTTTTTTTTTTT~~..----------TT.~TTT~TTTT~^TTTTTT~~^~..
====.T.......TTTTTT^^~T.TTT.~TTT~~.TTTTT.-TTT~TTTTTTTTTTTTTT~-------------..TT^~TT~TT~^TTTTTTTTT^^~~
====.TTTT.T.T.T....~^^~~TT~~~T~~~~TTTTT..TTT~~TT.TTTTTTTTTT.--------..~---.TT.~^^^^~T^^TTTT&TTT~~^^~
===.TTT..T......==T~~^^~~~~^^~^~~~~T.TT.~~.~~TTTTTTTTTTTTTT.-------...~~--T.T~TTTT^^^^TTTTTTTTT~^^^^
==.TT...T.TT.======T.~^^^^^^^^.T~~.~.~.T.~^^TTTTTTT&TTTTTT..-----..+..-~...TTT..TT~T^^~TT.TT...~~^^^
==T..TT+...====..==T~~~^^~~.TT..T~.TTT~TT~^^~~TTTTTTTTTTTT~~----~....---..TTTT..TT~TT^^~T..T.~~~~^^^
=.=TT.....======T.=T.~~^^^~~TTTTTT~TT~~TTT~^TTTTTTTTTTTTTT~..--~~--.----~.TTT.TT~~~...^~TTT~~~^^^^^^
=======..===T.=..T.TT~^^^^^~~TTTTTTTTT~~~~~^~~.TTTTTTTTTT~~.....T.-----~~~TT--T.~.o...~^~~~~^^^^^^^~
===.TT==.==.T==.+...~^^~~~^^~~TT.TTTTTTT~^^^~~~~TTT.TTTTT~T~..T~TT.----~~~----~~~...T..^^^^^^^^^~~^^
==.&^&.===..TT==...~~^T..~~^^~~..TTTTTTTT~^^^^~~~~~~..TTT~T~~~.~TTT--.~~.-----......T..~^^^^^^^~~~~~
==.~&..=...T..T=.~~^^TTTTT~^^^~~T~T.TTTTTT~~^~.~~~TTTT..~~TT^^~TT~T..~~..------..TTT..~~^^^^^^^~o~~~
===..T..TTTT.T.TTT~.T...T.~^~^T~~TTTTTTT..T~^~..T.T..T.T~..T.^^~TT~~~~T..------~..TT.~^^^^^^^~~~~~~~
=====.T.TTTT..T.T~TT..*..T~^TTTTT~~T.TTTTT.^^..T..T...TT=.T~.~^~~~^^^~....----.~....~^^^^^^^~~~~~~~~
=====..=T.T...TTT.TT....TT~~TT==.TTTTTTT.T.~^..=...=.+..==..~~^^^^^^~TT.o..--..~~~~~^^^^^^^~~~~~~~~~
====.=.=..T.*...TT..TT.TT~~TTTT==...TT.TTT.^^.=======..====..T~^^^^~TTT...~.T..~~~~^^^^^^~~~~~~~~~~~
========..T=..TT.TTT.TTT~TT~TTT===.=.T...T~^~.============.T.~~^^^^~T.~~.~....~~~^^^^^^^~~~~~~~~~~~~
=====.T.T.T===.T.T..TTTT.TT..T..====..=TT.^~..T.=========T.~TT~^~^^~T.T~~~TTT~~^^^^^^^~~~~~~~~~~~~~~
======.TT...T==T.T.TT.TT....TTT.=.==.=.T..^~..T..=.==.===.T.~~TT~~^~~TTT~^~T~~^^^^^^^^~~~~~o~~~~~~~~
=====..&&T.T.=TTT..T..TTT...T.TT.=====...~~~~.T.T==TT==.=.T.~TTTT~^^~~..T^~~~^^^^~^^^^^~~~~~~~~~~~~~
====.&&&~~T.==TTTT..*.T...+..TTT.====.T~~.~T~~T.T..T==T===.....~T~^^^TT~~^^~^^^^^~~~~^^^~~~~~~~~~~~~
====.&~^^&&.==.TT.==..T..T...T.=====T.T~TTT~~^~.TT..=..====.....~~~^^^~^^^^^^^^~~~~~~~~~^~~~~~~~~~~~
====.TT~&&.==T.TT.==..TTT...TT====.TTTT.....T^^~T.....T.=======...~~~^^^~~^^^~~~~~~~~~~~^^~~~~~~~~~~
=====.TT&&.==.T.T.==.T..T.....====T...T......~^^~T.T.TT.T======...~~~~~~~~^^^~~~~~o~~~~~~^~~~~~~~~~~
=====..T..====...==....=..TTT.===..==..T.=....~^^~~TTTT....=====.~~~~~~~~~^^^~~~~~~~~~~~~^^^^^~~~~~~
======..=======.====..==T..=..======.T.===+T...T^^^~TT...=..=====~~~~o~~~~^^^~~~~~~~~~~~^^~~~~^~~~~~
=========================T.=...====.T..====......~~~.T.T===========~~~~~~~^~^~~~~~~~~~~~~~~~~~~^~~~~
========================.T===TT.===.T.======.TTT...TTT.T===========~~~~~~~^~^^~~~~~~~~~~~~~~~~~^^~~~
=============================.T.TT==.=======.TT.TTT...T.T===========~~~~~~~~~~^~~~~~~~~~~~~~~~~~^~~~
============================.T.TT===========T...=======..===========~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~
============================...=.==========.TT=====================~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
==============================.==.================================~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
=================================================================~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
'''[1:]
map_symbols = {
    '=': ('#003366', '#000000'),
    '.': ('#996633', '#000000'),
    'T': ('#006633', '#000000'),
    '&': ('#006633', '#000000'),
    '-': ('#006699', '#000000'),
    '~': ('#665533', '#000000'),
    '^': ('#BBBBBB', '#000000'),
}

class Position:
    comp_mask = 0x1
    __slots__ = ['x', 'y', 'z', 'unit']
    def __init__(self, unit, x, y, z):
        self.unit = unit
        self.x, self.y, self.z = x, y, z

class Render:
    comp_mask = 0x2
    __slots__ = ['char', 'fore', 'back', 'unit']
    def __init__(self, unit, c, f, b):
        self.unit = unit
        self.char, self.fore, self.back = c, f, b

class Entity:
    class_id = 0
    class_mask = 0
    def __init__(self):
        Entity.class_id += 1
    
    def add_component(self, component):
        name = component.__class__.__name__.lower()
        if hasattr(self, name):
            raise ValueError('Cannot add a second component of same type')
        setattr(self, name, component)
    
class Player(Entity):
    position = None
    render  = None

    def add_component(self, component):
        self.class_mask |= component.comp_mask
        name = component.__class__.__name__.lower()
        if hasattr(self, name) and getattr(self, name):
            raise ValueError('Cannot add a second component of same type')
        setattr(self, name, component)

if __name__ == "__main__":
    p = Player()
    print(p.class_mask)
    print(p.position, p.render)
    p.add_component(Position(p, 2, 3, 1))
    print(p.position, p.class_mask)
    p.add_component(Render(p, '@', '#ffffff', '#000000'))
    print(p.render, p.class_mask)
    print(p.class_id)

    e = Entity()
    print(e.class_id)

    q = Player()
    print(q.class_id)

